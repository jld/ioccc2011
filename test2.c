#include <stdio.h>
#include <stdlib.h>

typedef void **t;
void *N[] = {N, N};
t G, H, M;

#define Z ; if (A == D) goto
#define C ; *(T = G) =D ++; D -= (G =* -- T) ||! (G = calloc(2, sizeof* N)); \
	    *T ++= A; G -=(t) *T --- D; D = T;
#define F ; A =* D; *D ++= G; D =* (G = D);
#define U ; A =* D ++; D =* D;
#define L ; A = D; D =
#define S     = D; D = A;
#define X ; T = A; A =* ++D; *D --= T;

int main()
{
	t T, A, D;

	int n;
	t p, i, o, x;
	T=A=D=M=N F C;
	scanf("%d", &n);
	p = calloc(n, sizeof* N);
r:	printf("0\n") L N U i S o S 
	    while (scanf("%d", &n), n) {L p+n-1 L i C i S}
#if 0
v:      L i U Z f L i F i S L o C o S Z v;
#else
v:      L i U Z f L o L i X o S i S Z v;
#endif
f:	L o C L x S i S L H L M C M S;
b:      L i U U Z e; T S A +=(D-p)%2 Z d L i U i S Z b;
d:      L i U U L i X C L H C H S Z b;
e:      L x U o S
p:      L o U Z n; printf("%d ", (int)(A-p)+1) L o U o S Z p;
n:      L M U Z x; T S L H Z m L H F H S F X T S Z n;
m:	L M F M S Z e;
x:      L x U Z r L x F x S Z x;
	return 0;
}
